# 15.2.15 Subqueries

[공식문서](https://dev.mysql.com/doc/refman/8.0/en/subqueries.html)

## 15.2.15.2. Comparisons Using Subqueries




# 문제 풀이

## 1. 많이 주문한 테이블 찾기
[문제링크](https://solvesql.com/problems/find-tables-with-high-bill/)

![show](../Images1/w1_1.png)

```
SELECT
  *
FROM
  tips
WHERE total_bill > (SELECT AVG(total_bill) FROM tips)
```

## 2. 레스토랑의 대목
[문제링크](https://solvesql.com/problems/high-season-of-restaurant/)

![show](../Images1/w1_2.png)

```
WITH ST AS (
    SELECT day, SUM(total_bill) AS total_sales
    FROM tips
    GROUP BY day
    HAVING SUM(total_bill) >= 1500
)

SELECT t.*
FROM tips t
JOIN ST ON ST.day = t.day;
```

## 3. 식품분류별 가장 비싼 식품의 정보 조회하기
[문제링크](https://school.programmers.co.kr/learn/courses/30/lessons/131116)

![show](../Images1/w1_3.png)

```
SELECT
  CATEGORY,
  PRICE AS MAX_PRICE,
  PRODUCT_NAME
FROM
  FOOD_PRODUCT
WHERE
  PRICE IN (
    SELECT
      MAX(PRICE)
    FROM
      FOOD_PRODUCT
    GROUP BY
      CATEGORY
  )
  AND CATEGORY IN ('과자', '국', '김치', '식용유')
ORDER BY
  PRICE DESC;
```
